<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- REPORTE HOLA MUNDO -->
    <template id="hello_world_report">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <h1 style="text-align: center; margin-top: 100px;">HOLA MUNDO</h1>
                    <p style="text-align: center; margin-top: 50px;">
                        Este es un reporte generado desde Odoo PDFMake
                    </p>
                    <p style="text-align: center; margin-top: 30px;">
                        Fecha: <span t-out="datetime.now().strftime('%d/%m/%Y %H:%M:%S')"/>
                    </p>
                </div>
            </t>
        </t>
    </template>

    <!-- REPORTE CONSTANCIA DE EMPLEO CORREGIDO -->
    <template id="employment_letter_report">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page" style="padding: 50px;">
                    <h1 style="text-align: center; margin-bottom: 50px;">CONSTANCIA DE EMPLEO</h1>
                    
                    <p style="text-align: justify; line-height: 1.6; margin-bottom: 20px;">
                        Yo, <strong t-out="employee_data.get('employer_name', 'Nombre del Empleador')"/>, 
                        en mi calidad de <strong t-out="employee_data.get('employer_position', 'Cargo del Empleador')"/> 
                        de <strong t-out="employee_data.get('employer_company', 'Nombre de la Empresa')"/>, 
                        por medio de la presente certifico que 
                        <strong t-out="employee_data.get('employee_name', 'Nombre del Empleado')"/> 
                        ha sido empleado en nuestra empresa desde el 
                        <strong t-out="employee_data.get('employee_start_date', 'Fecha de Inicio')"/>.
                    </p>
                    
                    <p style="text-align: justify; line-height: 1.6; margin-bottom: 20px;">
                        Durante su empleo, el Sr./Sra. <strong t-out="employee_data.get('employee_name', 'Nombre del Empleado')"/> 
                        ha desempeÃ±ado el cargo de <strong t-out="employee_data.get('employee_position', 'Cargo del Empleado')"/>, 
                        demostrando responsabilidad, compromiso y habilidades profesionales en sus labores.
                    </p>
                    
                    <p style="text-align: justify; line-height: 1.6; margin-bottom: 20px;">
                        La jornada laboral del Sr./Sra. <strong t-out="employee_data.get('employee_name', 'Nombre del Empleado')"/> 
                        es de <strong t-out="employee_data.get('employee_hours', 40)"/> horas semanales, 
                        con un horario de <strong t-out="employee_data.get('employee_work_schedule', 'Horario de Trabajo')"/>, 
                        cumpliendo con las polÃ­ticas y procedimientos establecidos por la empresa.
                    </p>
                    
                    <p style="text-align: justify; line-height: 1.6; margin-bottom: 40px;">
                        Esta constancia se expide a solicitud del interesado para los fines que considere conveniente.
                    </p>
                    
                    <div style="margin-top: 60px;">
                        <p style="margin-bottom: 10px;">Atentamente,</p>
                        <p style="margin-bottom: 5px;"><strong t-out="employee_data.get('employer_name', 'Nombre del Empleador')"/></p>
                        <p style="margin-bottom: 5px;"><strong t-out="employee_data.get('employer_position', 'Cargo del Empleador')"/></p>
                        <p style="margin-bottom: 5px;"><strong t-out="employee_data.get('employer_company', 'Nombre de la Empresa')"/></p>
                        <p style="margin-top: 20px;">
                            Fecha de emisiÃ³n: <strong t-out="employee_data.get('issue_date', 'Fecha')"/>
                        </p>
                    </div>
                    
                    <div style="margin-top: 80px; text-align: center; font-style: italic; font-size: 10px;">
                        Este documento es una constancia de empleo y no representa un compromiso laboral.
                    </div>
                </div>
            </t>
        </t>
    </template>

    <!-- REPORTE MÃ‰DICO BÃSICO -->
<!-- REPORTE MÃ‰DICO BÃSICO - AJUSTADO -->
<template id="medical_report_basic">
    <t t-call="web.html_container">
       <t t-call="pdfmake.external_layout_logo_corner">
            <div class="page" style="padding: 5mm 0 0 0; font-family: 'Helvetica', Arial, sans-serif; line-height: 1.4;">
                <!-- Encabezado -->
                <div style="text-align: center; margin-bottom: 15px; border-bottom: 2px solid #2c3e50; padding-bottom: 10px;">
                    <h1 style="color: #2c3e50; margin: 0; font-size: 22px; font-weight: bold;">
                        <t t-out="medical_data.get('medical_center', 'CENTRO MÃ‰DICO')"/>
                    </h1>
                    <p style="margin: 3px 0; color: #7f8c8d; font-size: 12px; font-style: italic;">
                        Servicios MÃ©dicos de Calidad
                    </p>
                </div>

                <!-- TÃ­tulo del Reporte -->
                <div style="text-align: center; margin-bottom: 15px;">
                    <h2 style="color: #e74c3c; margin: 0; font-size: 18px; border-bottom: 1px solid #e74c3c; display: inline-block; padding-bottom: 3px;">
                        REPORTE MÃ‰DICO
                    </h2>
                </div>

                <!-- Resto del contenido mÃ©dico... (mantener el mismo contenido pero con mÃ¡rgenes reducidos) -->
                <div t-if="medical_data.get('isVer')" style="margin-bottom: 15px; background: #f8f9fa; padding: 10px; border-left: 3px solid #3498db; border-radius: 3px;">
                    <h3 style="color: #2c3e50; margin: 0 0 8px 0; font-size: 14px;">INFORMACIÃ“N DEL PACIENTE</h3>
                    <table style="width: 100%; border-collapse: collapse; font-size: 11px;">
                        <tr>
                            <td style="padding: 5px 3px; width: 25%; font-weight: bold;">Nombre:</td>
                            <td style="padding: 5px 3px;"><t t-out="medical_data.get('patient_name', 'No especificado')"/></td>
                        </tr>
                        <tr t-if="medical_data.get('patient_age')">
                            <td style="padding: 5px 3px; font-weight: bold;">Edad:</td>
                            <td style="padding: 5px 3px;"><t t-out="medical_data.get('patient_age')"/> aÃ±os</td>
                        </tr>
                        <tr t-if="medical_data.get('patient_gender')">
                            <td style="padding: 5px 3px; font-weight: bold;">GÃ©nero:</td>
                            <td style="padding: 5px 3px;"><t t-out="medical_data.get('patient_gender')"/></td>
                        </tr>
                    </table>
                </div>

                <!-- DiagnÃ³stico -->
                <div style="margin-bottom: 15px;">
                    <h3 style="color: #2c3e50; margin: 0 0 8px 0; font-size: 14px; border-bottom: 1px solid #bdc3c7; padding-bottom: 3px;">
                        DIAGNÃ“STICO
                    </h3>
                    <div style="background: white; border: 1px solid #e0e0e0; padding: 12px; border-radius: 5px; min-height: 80px;">
                        <p style="margin: 0; text-align: justify; white-space: pre-line; font-size: 11px;">
                            <t t-out="medical_data.get('diagnosis', 'No se especificÃ³ diagnÃ³stico.')"/>
                        </p>
                    </div>
                </div>

                <!-- Continuar con el resto del contenido ajustando mÃ¡rgenes y paddings... -->
                
            </div>
       </t>     
    </t>
</template>
    <!-- REPORTE MÃ‰DICO DETALLADO -->
    <template id="medical_report_detailed">
        <t t-call="web.html_container">
            <t t-call="pdfmake.external_layout_logo_corner">
                <div class="page" style="padding: 12mm; font-family: 'Helvetica', Arial, sans-serif; line-height: 1.4;">
                    <!-- Encabezado con logo -->
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; border-bottom: 3px solid #2c3e50; padding-bottom: 15px;">
                        <div>
                            <h1 style="color: #2c3e50; margin: 0; font-size: 22px; font-weight: bold;">
                                <t t-out="medical_data.get('medical_center', 'CENTRO MÃ‰DICO ESPECIALIZADO')"/>
                            </h1>
                            <p style="margin: 5px 0; color: #7f8c8d; font-size: 12px;">
                                Acreditado - Excelencia en Servicios de Salud
                            </p>
                        </div>
                        <div style="text-align: right;">
                            <p style="margin: 0; font-size: 11px; color: #7f8c8d;">
                                Fecha: <t t-out="medical_data.get('issue_date', '')"/>
                            </p>
                            <p style="margin: 5px 0 0 0; font-size: 11px; color: #7f8c8d;">
                                Hora: <t t-out="medical_data.get('current_datetime', '')"/>
                            </p>
                        </div>
                    </div>

                    <!-- TÃ­tulo -->
                    <div style="text-align: center; margin-bottom: 25px;">
                        <h2 style="color: #e74c3c; margin: 0; font-size: 20px; font-weight: bold; text-transform: uppercase;">
                            REPORTE MÃ‰DICO DETALLADO
                        </h2>
                    </div>

                    <!-- InformaciÃ³n Completa del Paciente -->
                    <div t-if="medical_data.get('isVer')" style="margin-bottom: 20px; background: #ecf0f1; padding: 15px; border-radius: 8px;">
                        <h3 style="color: #2c3e50; margin: 0 0 15px 0; font-size: 16px; text-align: center;">
                            DATOS DEL PACIENTE
                        </h3>
                        <table style="width: 100%; border-collapse: collapse; font-size: 12px;">
                            <tr>
                                <td style="padding: 8px; width: 25%; font-weight: bold; background: #34495e; color: white;">Nombre Completo:</td>
                                <td style="padding: 8px; background: white;"><t t-out="medical_data.get('patient_name', 'No especificado')"/></td>
                            </tr>
                            <tr t-if="medical_data.get('patient_age')">
                                <td style="padding: 8px; font-weight: bold; background: #34495e; color: white;">Edad:</td>
                                <td style="padding: 8px; background: white;"><t t-out="medical_data.get('patient_age')"/> aÃ±os</td>
                            </tr>
                            <tr t-if="medical_data.get('patient_gender')">
                                <td style="padding: 8px; font-weight: bold; background: #34495e; color: white;">GÃ©nero:</td>
                                <td style="padding: 8px; background: white;"><t t-out="medical_data.get('patient_gender')"/></td>
                            </tr>
                        </table>
                    </div>

                    <!-- Secciones de contenido -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                        <!-- DiagnÃ³stico -->
                        <div style="background: white; border: 1px solid #bdc3c7; border-radius: 8px; padding: 15px;">
                            <h4 style="color: #e74c3c; margin: 0 0 10px 0; font-size: 14px; border-bottom: 1px solid #e74c3c; padding-bottom: 5px;">
                                ðŸ©º DIAGNÃ“STICO
                            </h4>
                            <p style="margin: 0; font-size: 12px; text-align: justify; white-space: pre-line;">
                                <t t-out="medical_data.get('diagnosis', 'No se especificÃ³ diagnÃ³stico.')"/>
                            </p>
                        </div>

                        <!-- Tratamiento -->
                        <div t-if="medical_data.get('treatment')" style="background: white; border: 1px solid #bdc3c7; border-radius: 8px; padding: 15px;">
                            <h4 style="color: #27ae60; margin: 0 0 10px 0; font-size: 14px; border-bottom: 1px solid #27ae60; padding-bottom: 5px;">
                                ðŸ’Š TRATAMIENTO
                            </h4>
                            <p style="margin: 0; font-size: 12px; text-align: justify; white-space: pre-line;">
                                <t t-out="medical_data.get('treatment')"/>
                            </p>
                        </div>
                    </div>

                    <!-- Recomendaciones (ancho completo) -->
                    <div t-if="medical_data.get('isVer')" style="margin-bottom: 25px; background: white; border: 1px solid #bdc3c7; border-radius: 8px; padding: 15px;">
                        <h4 style="color: #f39c12; margin: 0 0 10px 0; font-size: 14px; border-bottom: 1px solid #f39c12; padding-bottom: 5px;">
                            ðŸ“‹ RECOMENDACIONES
                        </h4>
                        <p style="margin: 0; font-size: 12px; text-align: justify; white-space: pre-line;">
                            <t t-out="medical_data.get('recommendations', 'Seguir controles mÃ©dicos periÃ³dicos. Mantener estilo de vida saludable.')"/>
                        </p>
                    </div>

                    <!-- Firma -->
                    <div style="margin-top: 40px; border-top: 2px solid #7f8c8d; padding-top: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                            <div>
                                <p style="margin: 0; font-weight: bold; font-size: 14px;">
                                    <t t-out="medical_data.get('doctor_name', 'Dr. MÃ©dico')"/>
                                </p>
                                <p style="margin: 5px 0 0 0; color: #7f8c8d; font-size: 12px;">
                                    <t t-out="medical_data.get('doctor_specialty', 'MÃ©dico General')"/>
                                </p>
                                <p style="margin: 5px 0 0 0; color: #7f8c8d; font-size: 11px;">
                                    Registro Profesional: MP-XXXXX
                                </p>
                            </div>
                            <div style="text-align: center;">
                                <div t-if="medical_data.get('include_signature', True)" style="margin-bottom: 10px;">
                                    <div style="border-top: 1px solid #000; width: 250px; margin: 0 auto;"></div>
                                    <p style="margin: 5px 0 0 0; font-size: 11px; color: #7f8c8d;">Firma del Profesional</p>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <p style="margin: 0; font-weight: bold;">Fecha de EmisiÃ³n:</p>
                                <p style="margin: 5px 0 0 0;">
                                    <t t-out="medical_data.get('issue_date', '')"/>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Pie de pÃ¡gina -->
                    <div style="position: absolute; bottom: 8mm; left: 0; right: 0; text-align: center; font-size: 9px; color: #95a5a6;">
                        <p>
                            <!-- <t t-out="medical_data.get('medical_center', 'Centro MÃ©dico')"/> |  -->
                            <!-- Documento Confidencial | 
                            Generado: <t t-out="medical_data.get('current_datetime', '')"/> -->
                        </p>
                    </div>
                </div>
            </t>
        </t>
    </template>

    <!-- ACCIONES DE REPORTE -->
    <record id="action_report_hello_world" model="ir.actions.report">
        <field name="name">Hola Mundo PDF</field>
        <field name="model">test.pdf.report</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">pdfmake.hello_world_report</field>
        <field name="print_report_name">'hola_mundo.pdf'</field>
        <field name="binding_model_id" ref="model_test_pdf_report"/>
        <field name="binding_type">report</field>
    </record>

    <record id="action_report_employment_letter" model="ir.actions.report">
        <field name="name">Constancia de Empleo</field>
        <field name="model">test.pdf.report</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">pdfmake.employment_letter_report</field>
        <field name="print_report_name">'constancia_empleo.pdf'</field>
        <field name="binding_model_id" ref="model_test_pdf_report"/>
        <field name="binding_type">report</field>
    </record>

</odoo>